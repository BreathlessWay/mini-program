## 基础逻辑

1. 需要用户在开始运动和结束运动时打开小程序

2. 开始运动时，获取当前微信步数，以最接近开始时间的那一次打开为开始步数，最近时间点后不在统计

3. 结束运动时，获取当前微信步数，以最接近结束时间的那一次打开为结束步数，最近时间点后不在统计

4. 起始计数和结束计数，都是在时间点的前后10分钟内有效，不在时间段内则当天当天运动数据为0

5. 如果是雨天则由用户在打开时手动选择是否记录运动数据

6. 天气数据根据位置名称做缓存，每天清空

7. 用户每次打开小程序 授权一次性订阅消息 
  - 运动结束时间提醒
  - 第二天运动时间段，以及天气推送（晚十点推送）
  - 第二天运动开始时间提醒，以及天气推送（开始前10分钟推送）

8. 每个用户当天只产生一条语录，不每次打开随机产生不同

9. 新闻，黄历，节假日，历史上的今天，一句诗词，成语，每天凌晨定时任务更新

10. 根据经纬度获取城市

## 页面

1. tab 首页/我的

2. 首页（http://icheer.me/201910/1099/）
  - 定位获取 地址
  - [心知天气](https://www.seniverse.com/pricing)+[一言语录](http://api.52hyjs.com/)+[黄历](https://www.juhe.cn/docs/api/id/65)
  - [天气](https://www.juhe.cn/docs/api/id/73)，[节假日](https://www.juhe.cn/docs/api/id/606)
  - 时间段前-今日目标，时间段内-当前步数，时间段后达成率
  - 雨天（依旧运动弹窗）
  - 运动完，分享 鸡汤+天气+运动达成率+小程序二维码+图片（用户可以自定义选择图片，没有则图库随机）
  - [新闻](https://www.juhe.cn/docs/api/id/235)/[历史上今天](https://www.juhe.cn/docs/api/id/63)
    - [一句诗词](https://gushi.ci/)/[成语](https://www.juhe.cn/docs/api/id/157)/
  - 新闻 每小时爬一次界面新闻快报，增量存储，查出当天新闻随机摘10条，每天凌晨重置

3. 我的
  - 头像
  - 性别：[女](https://www.zhihu.com/question/432063155)
  - 运动目标
    - 运动时间
      - 日历组件+下拉框： 法定工作日/每天/单日/双日 、 点击日历选择运动日（每月结束前5天推送设置下一个月运动时间）
      - 时间段选择 （最少10分钟），可选范围 早6点至晚10点（提示：充足的睡眠才是身体健康的保证哟）
      - 长按单独设置 时间段
      - 不可修改当天
    - 运动目标：步数（km对应步数大概值）
  - 历史运动数据列表
    - 目标达成率 折线图 （周/月）
    - 运动步数柱状图 （周/月）
  - 自定义首页 新闻/历史上今天/一句诗词/成语
  - 使用说明

  ## 其他

  1. [彩虹屁](https://www.zhihu.com/question/357640100)