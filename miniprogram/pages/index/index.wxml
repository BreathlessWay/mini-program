<wxs module="utils" src="./utils.wxs" />
<nav-header lastHeSuanTime="{{ userInfo ? userInfo.lastHeSuanTime : undefined }}" expiration="{{ userInfo ? userInfo.expiration : undefined }}" bindupdateTime="updateTime" />
<block wx:if="{{userInfo}}">
  <image style="width: 200px; height: 200px; background-color: #eeeeee;" src="{{userInfo.avatarUrl}}"></image>
  <view>
    <text>{{ userInfo.nickName }}</text>
  </view>
  <view>
    <text>{{ soulSoupData.content }}</text>
  </view>
  <view>
    <text>最近一次核酸时间：{{ utils.formartTime(userInfo.lastHeSuanTime) }}</text>
  </view>
  <view>
    <text>距离核酸过期还有：</text>
    <van-count-down time="{{ time }}" format="DD 天 HH 时 mm 分" />
  </view>
  <view>
    <text>核酸结果有效时间：{{ userInfo.expiration ? userInfo.expiration + ' 小时' : '' }}</text>
  </view>
</block>
<block wx:else>
  <block wx:if="{{register}}">
    <button wx:if="{{canIUseGetUserProfile}}" bindtap="getUserProfile" class="van-button van-button--info van-button--normal van-button--plain" hover-class="van-button--active hover-class">
      <van-icon size="1.2em" name="manager-o" class="van-button__icon" custom-style="line-height: inherit;" />
      <view class="van-button__text">注册新用户</view>
    </button>
    <button wx:else open-type="getUserInfo" bindgetuserinfo="getUserInfo" class="van-button van-button--info van-button--normal van-button--plain" hover-class="van-button--active hover-class">
      <van-icon size="1.2em" name="manager-o" class="van-button__icon" custom-style="line-height: inherit;" />
      <view class="van-button__text">注册新用户</view>
    </button>
  </block>
</block>
<van-toast id="van-toast" />